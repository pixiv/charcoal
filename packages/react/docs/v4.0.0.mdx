import { Meta, Story } from '@storybook/addon-docs'
import { Unstyled } from '@storybook/blocks'

<Meta title="react/docs/v4.0.0" />

# @charcoal-ui/react@v4.0.0

- `v4.0.0`では多くの破壊的な変更があります。
- `styled-components`への依存を無くし、css ファイルを読み込む方式に変更しました。

```tsx
import { CharcoalProvider, Button } from '@charcoal-ui/react'

import '@charcoal-ui/react/dist/index.css'

function App() {
  return (
    <CharcoalProvider>
      <Button>Charcoal</Button>
    </CharcoalProvider>
  )
}
```

## ComponentAbstraction

- `ComponentAbstraction`が削除されました。
- `useComponentAbstraction`が削除されました。
- `type LinkProps`が削除されました。

## CharcoalProvider

- テーマに関する属性が削除されました。
  - `themeMap`, `defaultTheme`, `injectTokens`, `components`, `background`

Before

```tsx
// ...

<CharcoalProvider themeMap={themeMap}>
  <YourApp />
</CharcoalProvider>
```

After

styled を継続して利用する場合

```tsx
// ...
import { TokenInjector } from '@charcoal-ui/styled'
import { ThemeProvider } from 'styled-components'

<CharcoalProvider>
  <TokenInjector theme={themeMap} />
  <ThemeProvider theme={themeMap[':root']}>
    <YourApp />
  </ThemeProvider>
</CharcoalProvider>
```

## Button

- `ComponentAbstraction`と`to`を用いたカスタム要素の設定を、`component`に`React.ElementType`を指定することによって行えるように変更しました。

Before

```tsx
<ComponentAbstraction components={{ Link: RouterLink }}>
  <Button to="...">Link</Button>
</ComponentAbstraction>
```

After

```tsx
<Button component="a" href="...">Link</Button>
<Button component={RouterLink} to="...">Link</Button>
<Button component={NextLink} href="...">Link</Button>
```

## Checkbox

- `Checkbox`の`input`要素を`children`がない場合に label で囲わないようにしました。
- `React.HTMLProps<HTMLInputElement>`を継承するように変更しました。
- アイコンを CSS を用いて表示するように変更しました。

## Clickable

- `Button`と同様に`to`による指定を削除し、`component`によってカスタムできるように変更しました。
- `type ClickableElement`が削除されました。

## DropdownSelector

- `aria-labelledby`,`aria-describedby`を適用するように変更しました。

## IconButton

- `Button`と同様に`to`による指定を削除し、`component`によってカスタムできるように変更しました。

## MultiSelect

- コンポーネントが削除されました。
- `overlay`の代替として`Checkbox`の`rounded`が追加されました。

## RadioGroup

- `aria-labelledby`, `aria-orientation`をプロパティに追加しました。
- `label`をオプショナルに変更しました。

## Switch

- `Checkbox`の`input`要素を常に`label`で囲わないようにしました。
- `React.HTMLProps<HTMLInputElement>`を継承するように変更しました。

## TagItem

- `Button`と同様に`to`による指定を削除し、`component`によってカスタムできるように変更しました。

## TextArea

- `textarea`要素の`props`を継承するように変更しました。
- 文字数の計算ロジックを`getCount`プロパティで上書きできるように変更しました。

## TextField

- `input`要素の`props`を継承するように変更しました。
- 文字数の計算ロジックを`getCount`プロパティで上書きできるように変更しました。
