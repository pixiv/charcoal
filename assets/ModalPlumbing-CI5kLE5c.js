import{r,j as n,$ as K,v as D,a7 as Q,a8 as U,a9 as Z,aa as G,T as J,ab as ee,ac as ae,a5 as T,ad as te}from"./iframe-NqksIJAp.js";import{I as k}from"./index-bLnmO1Iw.js";import{F as ne,A as le,a as V}from"./useFocusWithClick-C-6g9M6r.js";import{P as re,u as oe,M as ue}from"./index-ndRftttd.js";import{g as ie,M as se,b as de,a as ce}from"./index-r21qv9j1.js";import{u as L}from"./useClassNames-vAgdujRd.js";import{B as me}from"./index-LvObDe0q.js";import{I as fe}from"./index-BANaXArz.js";function g({children:a,...t}){const e=r.useRef(null);return r.useEffect(()=>{t.isOpen&&e.current&&t.triggerRef.current&&(e.current.style.width=`${t.triggerRef.current.clientWidth}px`)},[t.triggerRef,t.isOpen]),r.useEffect(()=>{var o;if(t.isOpen)if(t.value!==void 0&&t.value!==""){const l=window.scrollY,u=window.scrollX,i=document.querySelector(`[data-key="${t.value.toString()}"]`);i==null||i.focus(),window.scrollTo(u,l)}else{const l=(o=e.current)==null?void 0:o.querySelector("[role='option']");l instanceof HTMLElement&&l.focus()}},[t.value,t.isOpen]),n.jsx(re,{isOpen:t.isOpen,onClose:t.onClose,popoverRef:e,triggerRef:t.triggerRef,inertWorkaround:t.inertWorkaround,children:a})}try{g.displayName="DropdownPopover",g.__docgenInfo={description:`DropdownSelectorの選択肢をを表示するためのPopover
triggerRefの要素と同じ幅になる
表示の際にvalueが等しいDropdownMenuItemを中央に表示する`,displayName:"DropdownPopover",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},triggerRef:{defaultValue:null,description:"",name:"triggerRef",required:!0,type:{name:"RefObject<Element | null>"}},popoverRef:{defaultValue:null,description:"",name:"popoverRef",required:!1,type:{name:"RefObject<HTMLDivElement | null>"}},inertWorkaround:{defaultValue:{value:"false"},description:`A tmp workaround for react-aria above 3.27.3 setting overlay element to inert and causing background to be clickable.
This may become default at next major.
https://github.com/adobe/react-spectrum/pull/8796
https://github.com/adobe/react-spectrum/issues/8784`,name:"inertWorkaround",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Key"}}}}}catch{}function b(a,t){const e=r.Children.toArray(a);for(let o=0;o<e.length;o++){const l=e[o];if(r.isValidElement(l)){if("value"in l.props&&l.props.value===t&&"children"in l.props)return l.props.children;if("children"in l.props){const u=b(l.props.children,t);if(u!==void 0)return u}}}}try{b.displayName="findPreviewRecursive",b.__docgenInfo={description:`DropdownSelectorの選択中の要素をレンダリングするため、
選択中のMenuItemを再帰的に探索しReactNodeを返す。`,displayName:"findPreviewRecursive",props:{}}}catch{}function I({onChange:a,showLabel:t=!1,...e}){const o=r.useRef(null),[l,u]=r.useState(!1),i=b(e.children,e.value),d=r.useMemo(()=>e.placeholder!==void 0&&i===void 0,[i,e.placeholder]),c=ie(e.children),{visuallyHiddenProps:f}=K(),m=r.useCallback(s=>{a(s.target.value)},[a]),v=D(),p=D(),h=L("charcoal-dropdown-selector-root",e.className);return n.jsxs("div",{className:h,"aria-disabled":e.disabled,children:[n.jsx(ne,{id:v,label:e.label,required:e.required,requiredText:e.requiredText,subLabel:e.subLabel,...t?{}:f}),n.jsx("div",{...f,"aria-hidden":"true",children:n.jsx("select",{name:e.name,value:e.value,onChange:m,tabIndex:-1,children:c.map(s=>n.jsx("option",{value:s.value,disabled:s.disabled,children:s.value},s.value))})}),n.jsxs("button",{className:"charcoal-dropdown-selector-button","aria-labelledby":v,"aria-invalid":e.invalid,"aria-describedby":e.assistiveText!==void 0?p:void 0,disabled:e.disabled,onClick:()=>{e.disabled!==!0&&u(!0)},ref:o,type:"button","data-active":l,children:[n.jsx("span",{className:"charcoal-ui-dropdown-selector-text","data-placeholder":d,children:d?e.placeholder:i}),n.jsx(k,{className:"charcoal-ui-dropdown-selector-icon",name:"16/Menu"})]}),l&&n.jsx(g,{isOpen:l,onClose:()=>u(!1),triggerRef:o,value:e.value,inertWorkaround:e.inertWorkaround,children:n.jsx(se,{value:e.value,onChange:s=>{a(s),u(!1)},children:e.children})}),e.assistiveText!==void 0&&n.jsx(le,{"data-invalid":e.invalid===!0,id:p,children:e.assistiveText})]})}try{I.displayName="DropdownSelector",I.__docgenInfo={description:"",displayName:"DropdownSelector",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},showLabel:{defaultValue:{value:"false"},description:"",name:"showLabel",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"boolean"}},assistiveText:{defaultValue:null,description:"",name:"assistiveText",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},requiredText:{defaultValue:null,description:"",name:"requiredText",required:!1,type:{name:"string"}},subLabel:{defaultValue:null,description:"",name:"subLabel",required:!1,type:{name:"ReactNode"}},name:{defaultValue:null,description:"the name of hidden `<select />`",name:"name",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},inertWorkaround:{defaultValue:{value:"false"},description:`A tmp workaround for react-aria above 3.27.3 setting overlay element to inert and causing background to be clickable.
This may become default at next major.
https://github.com/adobe/react-spectrum/pull/8796
https://github.com/adobe/react-spectrum/issues/8784`,name:"inertWorkaround",required:!1,type:{name:"boolean"}}}}}catch{}function R(a){const{value:t}=r.useContext(de),e=a.value===t,{children:o,...l}=a;return n.jsxs(ce,{...l,"aria-selected":e,children:[e&&n.jsx(k,{className:"charcoal-dropdown-selector-menu-item-icon",name:"16/Check"}),n.jsx("span",{className:"charcoal-dropdown-selector-menu-item","data-selected":e,children:o})]})}try{R.displayName="DropdownMenuItem",R.__docgenInfo={description:"DropdownSelectorの選択肢として使うMenuItem",displayName:"DropdownMenuItem",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLLIElement | null) => void) | RefObject<HTMLLIElement> | null"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | (string & readonly string[])"}}}}}catch{}function w(a){const t=r.useRef(null);return r.useEffect(()=>{a&&(typeof a=="function"?a(t.current):a.current=t.current)}),t}try{w.displayName="useForwardedRef",w.__docgenInfo={description:"",displayName:"useForwardedRef",props:{}}}catch{}const x=r.forwardRef(function({size:t,bottomSheet:e,className:o,...l},u){const i=w(u),{dialogProps:d}=Q({role:"dialog"},i),c=L("charcoal-modal-dialog",o);return n.jsx("div",{className:c,role:d.role,"data-bottom-sheet":e,tabIndex:d.tabIndex,"aria-labelledby":d["aria-labelledby"],onBlur:d.onBlur,"data-size":t,ref:i,...l})});try{x.displayName="Dialog",x.__docgenInfo={description:"",displayName:"Dialog",props:{size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"enum",value:[{value:'"S"'},{value:'"M"'},{value:'"L"'}]}},bottomSheet:{defaultValue:null,description:"",name:"bottomSheet",required:!0,type:{name:"BottomSheet"}}}}}catch{}function C(a,t,e){const{overlayProps:o,underlayProps:l}=U({...a,isOpen:t.isOpen,onClose:t.onClose,shouldCloseOnInteractOutside:()=>!1},e);return oe(typeof document<"u"?document.body:null,t.isOpen,a.overflowClip),Z(),r.useEffect(()=>{if(t.isOpen&&e.current)return G([e.current])},[t.isOpen,e]),{modalProps:o,underlayProps:l}}function pe(){return typeof window<"u"}function ve(){const[a,t]=r.useState(pe()?window.innerWidth:null);return r.useEffect(()=>{const e=()=>{t(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),a}try{C.displayName="useCharcoalModalOverlay",C.__docgenInfo={description:"",displayName:"useCharcoalModalOverlay",props:{overflowClip:{defaultValue:null,description:"",name:"overflowClip",required:!1,type:{name:"boolean"}}}}}catch{}const ye=10,q=r.forwardRef(function({children:t,zIndex:e=ye,portalContainer:o,...l},u){const{title:i,size:d="M",bottomSheet:c=!1,isDismissable:f,onClose:m,className:v,isOpen:p=!1,closeButtonAriaLabel:h="Close"}=l,s=J(u),{modalProps:$,underlayProps:F}=C({...l,isKeyboardDismissDisabled:f===void 0||f===!1},{onClose:m,isOpen:p},s),E=(ve()??1/0)<744,_=E&&c!==!1,P=!E||c!==!0,W=ee(p,{from:{transform:"translateY(100%)",backgroundColor:"rgba(0, 0, 0, 0)",overflow:"hidden"},enter:{transform:"translateY(0%)",backgroundColor:"rgba(0, 0, 0, 0.4)"},update:{overflow:"auto"},leave:{transform:"translateY(100%)",backgroundColor:"rgba(0, 0, 0, 0)",overflow:"hidden"},config:_?{duration:400,easing:te.easeOutQuart}:{duration:0}}),B=r.useRef(null),z=r.useCallback(y=>{y.currentTarget===y.target&&m()},[m]);return W(({backgroundColor:y,overflow:H,transform:Y},X)=>X&&n.jsx(ae,{portalContainer:o,children:n.jsx(T.div,{className:"charcoal-modal-background",ref:B,...F,style:_?{backgroundColor:y,overflow:H,zIndex:e}:{zIndex:e},"data-bottom-sheet":c,onClick:z,children:n.jsx(ue.Provider,{value:B.current,children:n.jsx(be,{ref:s,...$,style:_?{transform:Y}:{},size:d,bottomSheet:c,className:v,children:n.jsxs(N.Provider,{value:{titleProps:{},title:i,close:m,showDismiss:P,bottomSheet:c},children:[t,f===!0&&n.jsx(M,{"aria-label":h,onClick:m})]})})})})}))}),be=T(x),Ve=r.memo(q),N=r.createContext({titleProps:{},title:"",close:void 0,showDismiss:!0,bottomSheet:!1});function M(a){return n.jsx(fe,{className:"charcoal-modal-close-button",size:"S",icon:"24/Close",type:"button",...a})}function j({children:a,...t}){const{close:e,showDismiss:o}=r.useContext(N);return o?n.jsx(me,{...t,onClick:e,fullWidth:!0,children:a}):null}try{M.displayName="ModalCloseButton",M.__docgenInfo={description:"",displayName:"ModalCloseButton",props:{component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"enum",value:[{value:'"button"'}]}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"S"'},{value:'"M"'},{value:'"XS"'}]}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"Default"'},{value:'"Overlay"'}]}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}}}}}catch{}try{j.displayName="ModalDismissButton",j.__docgenInfo={description:"",displayName:"ModalDismissButton",props:{variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"Primary"'},{value:'"Default"'},{value:'"Overlay"'},{value:'"Danger"'},{value:'"Navigation"'}]}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"S"'},{value:'"M"'}]}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},component:{defaultValue:null,description:"The component used for root element.",name:"component",required:!1,type:{name:"T extends React.ElementType = 'button'"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null"}}}}}catch{}try{q.displayName="Modal",q.__docgenInfo={description:"モーダルコンポーネント。",displayName:"Modal",props:{overflowClip:{defaultValue:null,description:"",name:"overflowClip",required:!1,type:{name:"boolean"}},zIndex:{defaultValue:{value:"10"},description:"",name:"zIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"S"'},{value:'"M"'},{value:'"L"'}]}},bottomSheet:{defaultValue:null,description:"",name:"bottomSheet",required:!1,type:{name:"BottomSheet"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},closeButtonAriaLabel:{defaultValue:null,description:"",name:"closeButtonAriaLabel",required:!1,type:{name:"string"}},portalContainer:{defaultValue:null,description:`https://github.com/adobe/react-spectrum/issues/3787
Next.jsで使用する際に発生するエラーの一時的な回避策でdocument.bodyを指定する必要がある`,name:"portalContainer",required:!1,type:{name:"HTMLElement"}}}}}catch{}function Ne(){const a=r.useContext(N);return n.jsx("div",{className:"charcoal-modal-header-root","data-bottom-sheet":a.bottomSheet,children:n.jsx("div",{className:"charcoal-modal-header-title",children:a.title})})}const A=V("charcoal-modal-align"),O=V("charcoal-modal-body"),S=V("charcoal-modal-buttons");try{A.displayName="ModalAlign",A.__docgenInfo={description:"",displayName:"ModalAlign",props:{}}}catch{}try{O.displayName="ModalBody",O.__docgenInfo={description:"",displayName:"ModalBody",props:{}}}catch{}try{S.displayName="ModalButtons",S.__docgenInfo={description:"",displayName:"ModalButtons",props:{}}}catch{}export{I as D,Ve as M,R as a,Ne as b,O as c,A as d,S as e,j as f};
