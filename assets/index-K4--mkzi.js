import{r as l,j as y}from"./iframe-Czr9xm4W.js";import{L as F}from"./index-CZ-3iAot.js";const D=l.createContext({root:void 0,value:"",propsArray:[],setValue:e=>{}});function B(e){const u=l.Children.toArray(e),t=[];for(let n=0;n<u.length;n++){const o=u[n];if(l.isValidElement(o)){const r=o.props;"value"in r&&typeof r.value=="string"&&t.push({disabled:r.disabled,value:r.value}),"children"in r&&r.children&&t.push(...B(r.children))}}return t}try{B.displayName="getValuesRecursive",B.__docgenInfo={description:"valueというpropsを持つ子要素の値を再起的に探索して配列にする",displayName:"getValuesRecursive",props:{}}}catch{}function E(e){const u=l.useRef(null),t=l.useMemo(()=>B(e.children),[e.children]);return y.jsx("ul",{className:"charcoal-menu-list",ref:u,children:y.jsx(D.Provider,{value:{value:e.value??"",root:u,propsArray:t,setValue:n=>{var o;(o=e.onChange)==null||o.call(e,n)}},children:e.children})})}try{E.displayName="MenuList",E.__docgenInfo={description:"",displayName:"MenuList",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((v: string) => void)"}}}}}catch{}function f(e,u){if(u.scrollHeight>u.clientHeight){const n=e.getBoundingClientRect(),o=u.getBoundingClientRect();n.bottom>o.bottom?u.scrollTo({top:u.scrollTop+n.bottom-o.bottom}):n.top<o.top&&u.scrollTo({top:u.scrollTop-(o.top-n.top)})}else A(e)}function A(e){const u=e.getBoundingClientRect();u.top>=0&&u.bottom<=(window.innerHeight||document.documentElement.clientHeight)||e.scrollIntoView({block:"nearest"})}try{f.displayName="handleFocusByKeyBoard",f.__docgenInfo={description:`elementをparentのスクロールビューに入るようにスクロールする
parentがスクロール可能でなければelementが見えるようにスクロールする`,displayName:"handleFocusByKeyBoard",props:{}}}catch{}function m(e){const{setValue:u,root:t,propsArray:n}=l.useContext(D),o=l.useCallback(()=>{e!==void 0&&u(e)},[e,u]);return[l.useCallback(s=>{var d,_;if(s.key==="Enter")o();else if(s.key==="ArrowUp"||s.key==="ArrowDown"){const h=s.key==="ArrowDown";if(s.preventDefault(),!n||e===void 0)return;const i=n.map(c=>c.value).filter(c=>c);let a=i.indexOf(e);if(a===-1)return;for(let c=0;c<i.length;c++){const g=h?a+1>=i.length?i[0]:i[a+1]:a-1<0?i[i.length-1]:i[a-1],p=(d=t==null?void 0:t.current)==null?void 0:d.querySelector(`[data-key='${g}']`);if(p instanceof HTMLElement){if(p.ariaDisabled==="true"){a+=h?1:-1;continue}p.focus({preventScroll:!0}),(_=t==null?void 0:t.current)!=null&&_.parentElement&&f(p,t.current.parentElement);break}}}},[o,n,e,t]),o]}try{m.displayName="useMenuItemHandleKeyDown",m.__docgenInfo={description:`MenuListContextに含まれるvalue間で上下キーでfocusを移動できる
EnterキーでMenuListContextに値を設定する
上記2つの処理を含む処理(handleKeyDown)と、Enterキーを押下した処理(setContextValue)を配列で返す`,displayName:"useMenuItemHandleKeyDown",props:{}}}catch{}const C=l.forwardRef(function({className:u,value:t,disabled:n,...o},r){const[s,d]=m(t);return y.jsx(F,{...o,ref:r,"data-key":t,onKeyDown:s,onClick:n===!0?void 0:d,tabIndex:-1,"aria-disabled":n,role:"option",children:o.children})});try{C.displayName="MenuItem",C.__docgenInfo={description:"上下キーでフォーカス移動でき、エンターキーで選択できるリストの項目\n基本的に`<MenuList>`, `<MenuGroup>`と合わせて使用する",displayName:"MenuItem",props:{}}}catch{}export{E as M,C as a,D as b,B as g};
