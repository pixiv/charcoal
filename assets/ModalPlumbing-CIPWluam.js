import{r,j as t,$ as K,v as D,a7 as Q,a8 as U,a9 as Z,aa as G,T as J,ab as ee,ac as ae,a5 as T,ad as ne}from"./iframe-D-iARKYw.js";import{I as k}from"./index-DdwNNwH2.js";import{F as te,A as le,a as N}from"./useFocusWithClick-BSbJ3Cid.js";import{P as re,u as oe,M as ue}from"./index-D0fRfCmv.js";import{g as ie,M as se,b as de,a as ce}from"./index-B_d1BPec.js";import{u as L}from"./useClassNames-CRLeh4q8.js";import{B as me}from"./index-CX7H0yDE.js";import{I as fe}from"./index-OVy2DKqx.js";function g({children:a,...n}){const e=r.useRef(null);return r.useEffect(()=>{n.isOpen&&e.current&&n.triggerRef.current&&(e.current.style.width=`${n.triggerRef.current.clientWidth}px`)},[n.triggerRef,n.isOpen]),r.useEffect(()=>{var o;if(n.isOpen)if(n.value!==void 0&&n.value!==""){const l=window.scrollY,u=window.scrollX,i=document.querySelector(`[data-key="${n.value.toString()}"]`);i==null||i.focus(),window.scrollTo(u,l)}else{const l=(o=e.current)==null?void 0:o.querySelector("[role='option']");l instanceof HTMLElement&&l.focus()}},[n.value,n.isOpen]),t.jsx(re,{isOpen:n.isOpen,onClose:n.onClose,popoverRef:e,triggerRef:n.triggerRef,inertWorkaround:n.inertWorkaround,children:a})}try{g.displayName="DropdownPopover",g.__docgenInfo={description:`DropdownSelectorの選択肢をを表示するためのPopover
triggerRefの要素と同じ幅になる
表示の際にvalueが等しいDropdownMenuItemを中央に表示する`,displayName:"DropdownPopover",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},triggerRef:{defaultValue:null,description:"",name:"triggerRef",required:!0,type:{name:"RefObject<Element | null>"}},popoverRef:{defaultValue:null,description:"",name:"popoverRef",required:!1,type:{name:"RefObject<HTMLDivElement | null>"}},inertWorkaround:{defaultValue:{value:"false"},description:`A tmp workaround for react-aria above 3.27.3 setting overlay element to inert and causing background to be clickable.
This may become default at next major.
https://github.com/adobe/react-spectrum/pull/8796
https://github.com/adobe/react-spectrum/issues/8784`,name:"inertWorkaround",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"Key"}}}}}catch{}function b(a,n){const e=r.Children.toArray(a);for(let o=0;o<e.length;o++){const l=e[o];if(r.isValidElement(l)){if("value"in l.props&&l.props.value===n&&"children"in l.props)return l.props.children;if("children"in l.props){const u=b(l.props.children,n);if(u!==void 0)return u}}}}try{b.displayName="findPreviewRecursive",b.__docgenInfo={description:`DropdownSelectorの選択中の要素をレンダリングするため、
選択中のMenuItemを再帰的に探索しReactNodeを返す。`,displayName:"findPreviewRecursive",props:{}}}catch{}function j({onChange:a,showLabel:n=!1,...e}){const o=r.useRef(null),[l,u]=r.useState(!1),i=b(e.children,e.value),d=r.useMemo(()=>e.placeholder!==void 0&&i===void 0,[i,e.placeholder]),c=ie(e.children),{visuallyHiddenProps:f}=K(),m=r.useCallback(s=>{a(s.target.value)},[a]),v=D(),p=D(),h=L("charcoal-dropdown-selector-root",e.className);return t.jsxs("div",{className:h,"aria-disabled":e.disabled,children:[t.jsx(te,{id:v,label:e.label,required:e.required,requiredText:e.requiredText,subLabel:e.subLabel,...n?{}:f}),t.jsx("div",{...f,"aria-hidden":"true",children:t.jsx("select",{name:e.name,value:e.value,onChange:m,tabIndex:-1,children:c.map(s=>t.jsx("option",{value:s.value,disabled:s.disabled,children:s.value},s.value))})}),t.jsxs("button",{className:"charcoal-dropdown-selector-button","aria-labelledby":v,"aria-invalid":e.invalid,"aria-describedby":e.assistiveText!==void 0?p:void 0,disabled:e.disabled,onClick:()=>{e.disabled!==!0&&u(!0)},ref:o,type:"button","data-active":l,children:[t.jsx("span",{className:"charcoal-ui-dropdown-selector-text","data-placeholder":d,children:d?e.placeholder:i}),t.jsx(k,{className:"charcoal-ui-dropdown-selector-icon",name:"16/Menu"})]}),l&&t.jsx(g,{isOpen:l,onClose:()=>u(!1),triggerRef:o,value:e.value,inertWorkaround:e.inertWorkaround,children:t.jsx(se,{value:e.value,onChange:s=>{a(s),u(!1)},children:e.children})}),e.assistiveText!==void 0&&t.jsx(le,{"data-invalid":e.invalid===!0,id:p,children:e.assistiveText})]})}try{j.displayName="DropdownSelector",j.__docgenInfo={description:"",displayName:"DropdownSelector",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},showLabel:{defaultValue:{value:"false"},description:"",name:"showLabel",required:!1,type:{name:"boolean"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"boolean"}},assistiveText:{defaultValue:null,description:"",name:"assistiveText",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},requiredText:{defaultValue:null,description:"",name:"requiredText",required:!1,type:{name:"string"}},subLabel:{defaultValue:null,description:"",name:"subLabel",required:!1,type:{name:"ReactNode"}},name:{defaultValue:null,description:"the name of hidden `<select />`",name:"name",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},inertWorkaround:{defaultValue:{value:"false"},description:`A tmp workaround for react-aria above 3.27.3 setting overlay element to inert and causing background to be clickable.
This may become default at next major.
https://github.com/adobe/react-spectrum/pull/8796
https://github.com/adobe/react-spectrum/issues/8784`,name:"inertWorkaround",required:!1,type:{name:"boolean"}}}}}catch{}function R(a){const{value:n}=r.useContext(de),e=a.value===n,{children:o,secondary:l,...u}=a;return t.jsx(ce,{...u,"aria-selected":e,children:t.jsxs("div",{children:[t.jsxs("div",{className:"charcoal-dropdown-selector-menu-item-container",children:[e&&t.jsx(k,{className:"charcoal-dropdown-selector-menu-item-icon",name:"16/Check"}),t.jsx("span",{className:"charcoal-dropdown-selector-menu-item","data-selected":e,children:o})]}),l&&t.jsx("span",{className:"charcoal-dropdown-selector-menu-secondary",children:l})]})})}try{R.displayName="DropdownMenuItem",R.__docgenInfo={description:"DropdownSelectorの選択肢として使うMenuItem",displayName:"DropdownMenuItem",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLLIElement | null) => void) | RefObject<HTMLLIElement> | null"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | (string & readonly string[])"}},secondary:{defaultValue:null,description:"",name:"secondary",required:!1,type:{name:"ReactNode"}}}}}catch{}function x(a){const n=r.useRef(null);return r.useEffect(()=>{a&&(typeof a=="function"?a(n.current):a.current=n.current)}),n}try{x.displayName="useForwardedRef",x.__docgenInfo={description:"",displayName:"useForwardedRef",props:{}}}catch{}const w=r.forwardRef(function({size:n,bottomSheet:e,className:o,...l},u){const i=x(u),{dialogProps:d}=Q({role:"dialog"},i),c=L("charcoal-modal-dialog",o);return t.jsx("div",{className:c,role:d.role,"data-bottom-sheet":e,tabIndex:d.tabIndex,"aria-labelledby":d["aria-labelledby"],onBlur:d.onBlur,"data-size":n,ref:i,...l})});try{w.displayName="Dialog",w.__docgenInfo={description:"",displayName:"Dialog",props:{size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"enum",value:[{value:'"S"'},{value:'"M"'},{value:'"L"'}]}},bottomSheet:{defaultValue:null,description:"",name:"bottomSheet",required:!0,type:{name:"BottomSheet"}}}}}catch{}function C(a,n,e){const{overlayProps:o,underlayProps:l}=U({...a,isOpen:n.isOpen,onClose:n.onClose,shouldCloseOnInteractOutside:()=>!1},e);return oe(typeof document<"u"?document.body:null,n.isOpen,a.overflowClip),Z(),r.useEffect(()=>{if(n.isOpen&&e.current)return G([e.current])},[n.isOpen,e]),{modalProps:o,underlayProps:l}}function pe(){return typeof window<"u"}function ve(){const[a,n]=r.useState(pe()?window.innerWidth:null);return r.useEffect(()=>{const e=()=>{n(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),a}try{C.displayName="useCharcoalModalOverlay",C.__docgenInfo={description:"",displayName:"useCharcoalModalOverlay",props:{overflowClip:{defaultValue:null,description:"",name:"overflowClip",required:!1,type:{name:"boolean"}}}}}catch{}const ye=10,q=r.forwardRef(function({children:n,zIndex:e=ye,portalContainer:o,...l},u){const{title:i,size:d="M",bottomSheet:c=!1,isDismissable:f,onClose:m,className:v,isOpen:p=!1,closeButtonAriaLabel:h="Close"}=l,s=J(u),{modalProps:$,underlayProps:F}=C({...l,isKeyboardDismissDisabled:f===void 0||f===!1},{onClose:m,isOpen:p},s),E=(ve()??1/0)<744,_=E&&c!==!1,P=!E||c!==!0,W=ee(p,{from:{transform:"translateY(100%)",backgroundColor:"rgba(0, 0, 0, 0)",overflow:"hidden"},enter:{transform:"translateY(0%)",backgroundColor:"rgba(0, 0, 0, 0.4)"},update:{overflow:"auto"},leave:{transform:"translateY(100%)",backgroundColor:"rgba(0, 0, 0, 0)",overflow:"hidden"},config:_?{duration:400,easing:ne.easeOutQuart}:{duration:0}}),B=r.useRef(null),z=r.useCallback(y=>{y.currentTarget===y.target&&m()},[m]);return W(({backgroundColor:y,overflow:H,transform:Y},X)=>X&&t.jsx(ae,{portalContainer:o,children:t.jsx(T.div,{className:"charcoal-modal-background",ref:B,...F,style:_?{backgroundColor:y,overflow:H,zIndex:e}:{zIndex:e},"data-bottom-sheet":c,onClick:z,children:t.jsx(ue.Provider,{value:B.current,children:t.jsx(be,{ref:s,...$,style:_?{transform:Y}:{},size:d,bottomSheet:c,className:v,children:t.jsxs(V.Provider,{value:{titleProps:{},title:i,close:m,showDismiss:P,bottomSheet:c},children:[n,f===!0&&t.jsx(M,{"aria-label":h,onClick:m})]})})})})}))}),be=T(w),Ne=r.memo(q),V=r.createContext({titleProps:{},title:"",close:void 0,showDismiss:!0,bottomSheet:!1});function M(a){return t.jsx(fe,{className:"charcoal-modal-close-button",size:"S",icon:"24/Close",type:"button",...a})}function I({children:a,...n}){const{close:e,showDismiss:o}=r.useContext(V);return o?t.jsx(me,{...n,onClick:e,fullWidth:!0,children:a}):null}try{M.displayName="ModalCloseButton",M.__docgenInfo={description:"",displayName:"ModalCloseButton",props:{component:{defaultValue:null,description:"",name:"component",required:!1,type:{name:"enum",value:[{value:'"button"'}]}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"XS"'},{value:'"S"'},{value:'"M"'}]}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"Default"'},{value:'"Overlay"'}]}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}}}}}catch{}try{I.displayName="ModalDismissButton",I.__docgenInfo={description:"",displayName:"ModalDismissButton",props:{variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"Default"'},{value:'"Overlay"'},{value:'"Primary"'},{value:'"Danger"'},{value:'"Navigation"'}]}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"S"'},{value:'"M"'}]}},fullWidth:{defaultValue:null,description:"",name:"fullWidth",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},component:{defaultValue:null,description:"The component used for root element.",name:"component",required:!1,type:{name:"T extends React.ElementType = 'button'"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null"}}}}}catch{}try{q.displayName="Modal",q.__docgenInfo={description:"モーダルコンポーネント。",displayName:"Modal",props:{overflowClip:{defaultValue:null,description:"",name:"overflowClip",required:!1,type:{name:"boolean"}},zIndex:{defaultValue:{value:"10"},description:"",name:"zIndex",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"S"'},{value:'"M"'},{value:'"L"'}]}},bottomSheet:{defaultValue:null,description:"",name:"bottomSheet",required:!1,type:{name:"BottomSheet"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},closeButtonAriaLabel:{defaultValue:null,description:"",name:"closeButtonAriaLabel",required:!1,type:{name:"string"}},portalContainer:{defaultValue:null,description:`https://github.com/adobe/react-spectrum/issues/3787
Next.jsで使用する際に発生するエラーの一時的な回避策でdocument.bodyを指定する必要がある`,name:"portalContainer",required:!1,type:{name:"HTMLElement"}}}}}catch{}function Ve(){const a=r.useContext(V);return t.jsx("div",{className:"charcoal-modal-header-root","data-bottom-sheet":a.bottomSheet,children:t.jsx("div",{className:"charcoal-modal-header-title",children:a.title})})}const A=N("charcoal-modal-align"),O=N("charcoal-modal-body"),S=N("charcoal-modal-buttons");try{A.displayName="ModalAlign",A.__docgenInfo={description:"",displayName:"ModalAlign",props:{}}}catch{}try{O.displayName="ModalBody",O.__docgenInfo={description:"",displayName:"ModalBody",props:{}}}catch{}try{S.displayName="ModalButtons",S.__docgenInfo={description:"",displayName:"ModalButtons",props:{}}}catch{}export{j as D,Ne as M,R as a,Ve as b,O as c,A as d,S as e,I as f};
